<!doctype html>
<html>

<head>
    <meta charset=utf-8>
    <link rel="icon shortcut" href=img/logo.png type=image/png>
    <link rel=apple-touch-icon href=img/logo.png>
    <link rel=stylesheet href=https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css>
    <link rel=stylesheet href=css/base.css>
    <link rel=stylesheet href=css/contract.css>
    <link rel=stylesheet href=css/ui-block.css>
    <link rel=stylesheet href=codeMirror/codemirror.css>
    <link rel=stylesheet href=codeMirror/dracula.css>
    <meta name=viewport content="width=device-width">
    <title>Blockchain playground</title>
    <style>
        .wrapperExample1 .search_contract {
            background-color: #f5f5f5;
            border: none;
        }

        .wrapperExample1 .run_contract {
            background-color: #f5f5f5;
            border: none;
            margin-top: 20px;
        }

        .title {
            text-align: center;
            color: black;
            font-size: 30px;
        }

        .code {
            height: 300px;
        }

        .active1 {
            display: none;
        }
    </style>
</head>

<body>
    <div class=logo-main></div>
    <div class=header></div>


    <!-- Code Editor window -->

    <div class=wrapperExample1>

        <!-- search contract -->
        <div class=search_contract>
            <div class=title>
                <span>Search contract</span>
            </div>
            <input id=addr_input type=text placeholder="Please enter your address">
            <span class="errmsg active1">Please enter a valid TX hash</span>
            <button class=search>search</button>
            <textarea class="search_result active1" name=search_result id=search_result cols=30 rows=10></textarea>
        </div>

        <!-- <div id=js></div> -->

        <!-- run contract   and deploy contract -->
        <div class=run_contract>
            <div class=title>
                <span>Run/Deploy Contract</span>
            </div>
            <span>Byte Code</span>
            <textarea name=code id=code cols=30 rows=10></textarea>

            <span>Gas Limit</span>
            <input type=text id=gas>

            <span class="errmsg_code active1">Please enter a valid code</span>


            <div class="result active1" id=result>Results:success,you can deploy this contract.</div>
            <!-- <button onclick=submit()>RUN</button> -->
            <button id=run onclick=apiCall()>RUN</button>
            <div class="next  active1">
                <div class="select-wallet-file"></div>
                <button onclick=generateTransaction()>Deploy Contract</button>
            </div>
        </div>


    </div>

    <div class=footer></div>

    <script src=codeMirror/codemirror.js></script>
    <script src=codeMirror/javascript.js></script>
    <script src=https://code.jquery.com/jquery-3.3.1.slim.min.js></script>
    <script src=https://cdn.bootcss.com/bootbox.js/4.4.0/bootbox.min.js data-depends="bootstrap jquery"></script>
    <script src=js/wallet.js></script>
    <script src=js/nebApi.js></script>
    <script src=js/codeEditor.js></script>
    <script src=js/i18n.js data-depends=jquery.slim></script>
    <script src=js/ui-block.js data-depends="bootbox jquery wallet.js"></script>
    <script>
        "use strict";

        uiBlock({
            footer: ".footer",
            header: ".header",
            logoMain: ".logo-main",
            selectWalletFile: [".select-wallet-file", onUnlockFile]
        });



        function onUnlockFile(fileJson, account, password) {
            var state, balance_nas;

            try {
                account.fromKey(fileJson, password);
                $("#fromaddress").val(account.getAddressString());
                $("#unlock").hide();
                $("#send").show();

                state = neb.api.getAccountState(account.getAddressString());
                balance_nas = Utils.toBigNumber(state.balance).dividedBy(unitValue("nas")).toNumber();

                $("#balance").val(balance_nas);
                $("#nonce").val(parseInt(state.nonce) + 1);
            } catch (e) {
                bootbox.dialog({
                    message: e,
                    size: "large",
                    title: "Error"
                });
            }
        }
        $(function () {

            $(".search").click(function () {

                if ($("#addr_input").val().length < 48) {
                
                    $(".errmsg").removeClass("active1");
                
                } else {
                
                    $(".search_result").removeClass("active1");
                
                }
            
            })

            $("#run").click(function () {

                if ($("#code").val().length < 10) {

                    $(".errmsg_code").removeClass("active1");

                } else {

                    $(".result").removeClass("active1");

                    $(".next").removeClass("active1");

                }
            })

        })

    </script>
</body>

</html>