<!doctype html>
<html>

<head>
    <meta charset=utf-8>
    <link rel="icon shortcut" href=img/logo.png type=image/png>
    <link rel=apple-touch-icon href=img/logo.png>
    <link rel=stylesheet href=https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css>
    <link rel=stylesheet href=css/base.css>
    <link rel=stylesheet href=css/home.css>
    <link rel=stylesheet href=css/ui-block.css>
    <meta name=viewport content="width=device-width">
    <title>星云链测试网 | Nebulas Testnet</title>

    <style>
        .hash {
            height: 400px;
            box-shadow: 16px 16px 47px 2px rgba(0, 0, 0, .07);
            padding: 1.5rem 2rem;
            min-height: 1.5rem;
            margin: 1rem auto;
            position: relative;
            text-align: center;
        }

        .information {
            height: 830px;
            box-shadow: 16px 16px 47px 2px rgba(0, 0, 0, .07);
            padding: 1.5rem 2rem;
            min-height: 1.5rem;
            margin: 1rem auto;
            position: relative;
            text-align: center;
        }

        .active1 {
            display: none;
        }

        .errmsg {
            color: red;
        }

        .form-control{
            text-align: center;
        }

        .table tr>td:first-child {
            text-align: left;
        }
    </style>

</head>

<body>
    <div class="logo-main"></div>
    <div class="header"></div>

    <section class="hash">
        <article class="row"></article>
        <section class="col">
            <h1 translate="NAV_CheckTxStatus" class="ng-scope">Check TX Status</h1>
            <p translate="tx_Summary" class="ng-scope">During times of high volume (like during ICOs) transactions can be pending for hours, if not days. This tool
                aims to give you the ability to find and "cancel" / replace these TXs.
                <strong> This is not typically something you can do. It should not be relied upon &amp; will only work when the TX
                    Pools are full.
                    <a target="_blank" rel="noopener noreferrer" href="https://myetherwallet.github.io/knowledge-base/transactions/check-status-of-ethereum-transaction.html">Please, read about this tool here.</a>
                </strong>
            </p>
        </section>
        <section class="col text-center">
            <input id="input" class="form-control" type="text" placeholder="344da3d68386..................a6bb2817d4c1">
            <button id="btn" tabindex="0" role="button" class="btn btn-primary ng-scope">Check TX Status</button>
            <br>
            <span class="errmsg active1">Please enter a valid TX hash</span>
        </section>
        </article>
    </section>

    <section class="information active1" id="info">

        <div ng-show="txInfo.status == txStatus.found || txInfo.status == txStatus.mined" class="">
            <h4 translate="tx_Details" class="cont-md ng-scope">Transaction Details</h4>
            <br>
            <table class="table table-striped txstatus__2 cont-md">
                <tbody>
                    <tr>
                        <td translate="x_TxHash" class="ng-scope">TX Hash</td>
                        <td>
                            <a href="#" target="_blank" rel="noopener noreferrer" class="tx_hash"></a>
                        </td>
                    </tr>

                    <tr>
                        <td translate="x_TxHash" class="ng-scope">TxReceipt Status</td>
                        <td>
                            <a href="#" target="_blank" rel="noopener noreferrer" class="status"></a>
                        </td>
                    </tr>

                    <tr>
                        <td translate="OFFLINE_Step1_Label_1" class="ng-scope">From Address</td>
                        <td>
                            <a href="#" target="_blank" rel="noopener noreferrer" class="from_address"></a>
                        </td>
                    </tr>

                    <tr>
                        <td translate="OFFLINE_Step2_Label_1" class="ng-scope">To Address</td>
                        <td>
                            <a href="#" target="_blank" rel="noopener noreferrer" class="to_address"></a>
                        </td>
                    </tr>

                    <tr>
                        <td translate="SEND_amount_short" class="ng-scope">Amount</td>
                        <td class="value"></td>
                    </tr>

                    <tr>
                        <td>
                            <span translate="OFFLINE_Step2_Label_5" class="ng-scope">Nonce</span>
                        </td>
                        <td class="nonce"></td>
                    </tr>

                    <tr>
                        <td>
                            <span translate="OFFLINE_Step2_Label_4" class="ng-scope">Gas Limit</span>
                        </td>
                        <td class="gasLimit"></td>
                    </tr>

                    <tr>
                        <td>
                            <span translate="OFFLINE_Step2_Label_3" class="ng-scope">Gas Price</span>
                        </td>
                        <td class="gasPrice"></td>
                    </tr>

                    <tr>
                        <td translate="OFFLINE_Step2_Label_6" class="ng-scope">Data</td>
                        <td class="data">
                            <textarea name="code" id="code" cols="50" rows="2"></textarea>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </section>

    <div class="footer"></div>

    <div class="modal fade" tabindex="-1" id="info" role="dialog">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                    <h4 class="modal-title">info</h4>
                </div>
                <div class="modal-body">
                    <p>unlocking&hellip;</p>
                </div>
            </div>
        </div>
    </div>

    <script src=https://code.jquery.com/jquery-3.3.1.min.js></script>
    <script src=https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.bundle.min.js data-depends=jquery.slim></script>
    <script src=https://cdn.bootcss.com/bootbox.js/4.4.0/bootbox.min.js data-depends="bootstrap jquery"></script>
    <script src=js/api.js data-depends=jquery></script>
    <script src=js/home.v1.js></script>
    <script src=js/ui-block.js data-depends="bootbox jquery wallet.js"></script>
    <script src=js/wallet.js></script>
    <script>
        $(function () {

            uiBlock({
                footer: ".footer",
                header: ".header",
                logoMain: ".logo-main"
            });


            $("#btn").click(function () {
                if ($("#input").val().length < 46) {
                    $(".errmsg").removeClass("active1");
                    setTimeout(function () {
                        $(".errmsg").addClass("active1");
                    }, 2000);
                } else {

                    api.getTx($("#input").val())
                        .then(done, fail);

                }
            });
        });

        function toWei(n) {
            var arr = ["Wei", "kWei", "MWei", "GWei", "TWei", "PWei", "Nas"],
                i, len = arr.length - 1;

            for (i = 0, n = +n || 0; i < len && n >= 1000; ++i, n /= 1000);

            n = n.toFixed();
            return (i == len ? numberAddComma(n) : n) + " " + arr[i];
        }

        function toNas(n) {
            var arr = ["kNas", "MNas", "GNas", "TNas", "PNas", "ENas", "ZNas", "YNas"],
                i, len = arr.length - 1;

            for (i = 0, n = +n || 0; i < len && n >= 1000; ++i, n /= 1000);

            n = n.toFixed();
            return (i == len ? numberAddComma(n) : n) + " " + arr[i];
        }


        function done(o) {
            console.log(o);

            $("#info").removeClass("active");
            $(".tx_hash").append(o.hash);

            $(".status").append(o.status == 1 ? "success" : ( o.status == 0 ? "fail" : "pending" ));

            $(".from_address").append(o.from);

            $(".to_address").append(o.to);

            $(".nonce").append(o.nonce);

            $(".gasLimit").append(o.gas_limit);

            var num = toWei(o.gas_price);
            $(".gasPrice").append(num);

            $(".data").append();

            var nas = toNas(o.value);
            $(".value").append(nas);
        }

        function fail() {
        }
    </script>

</body>

</html>